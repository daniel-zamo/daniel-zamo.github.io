---
// RUTA: src/components/Quiz.astro (VERSIÓN CON DATA ATTRIBUTES)
import type { CollectionEntry } from 'astro:content';
interface Props {
  question: CollectionEntry<'questions'>['data'];
}
const { question } = Astro.props;
const formId = `quiz-form-${question.id}`;
---

<div class="quiz-container">
  {question.question.scenario && <p class="scenario"><em>{question.question.scenario}</em></p>}
  <p class="prompt">{question.question.prompt}</p>

  <!-- La magia está aquí: almacenamos los datos en el formulario -->
  <form 
    class="options-form" 
    id={formId}
    data-correct-answer-id={question.correctAnswerId}
    data-explanation={JSON.stringify(question.explanation)}
  >
    {question.options.map(option => (
      <div class="option">
        <input type="radio" id={`option-${option.id}-${question.id}`} name={`quiz_option_${question.id}`} value={option.id}>
        <label for={`option-${option.id}-${question.id}`}>{option.text}</label>
      </div>
    ))}
    <button type="submit">Check Answer</button>
  </form>

  <!-- El contenedor del feedback sigue igual -->
  <div class="feedback-container" style="display: none;">
    <h3 class="feedback-title"></h3>
    <p class="feedback-summary"></p>
    <h4>Breakdown:</h4>
    <ul class="feedback-breakdown"></ul>
  </div>
</div>

<style>
  /* Los estilos no cambian */
  .quiz-container { border: 1px solid #ccc; padding: 1.5rem; border-radius: 8px; margin-top: 2rem; background-color: var(--sl-color-gray-6); }
  .scenario { border-left: 3px solid var(--sl-color-accent); padding-left: 1rem; color: var(--sl-color-gray-3); }
  .prompt { font-size: 1.2em; font-weight: bold; }
  .options-form .option { margin: 0.8rem 0; }
  .options-form button { margin-top: 1rem; padding: 0.5rem 1rem; border-radius: 4px; border: none; background-color: var(--sl-color-accent); color: white; cursor: pointer; }
  .feedback-container { margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #ccc; }
</style>
