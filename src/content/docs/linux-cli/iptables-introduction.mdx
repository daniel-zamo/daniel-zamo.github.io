---
title: An Introduction to iptables
description: Learn the fundamentals of iptables, the powerful Linux firewall. This guide covers the basic concepts, commands, and a practical example for  securing your server.
pubDate: 2025-09-12
tags: ["linux", "firewall", "iptables", "security", "networking"]
sidebar:
   label: 'iptables Basics'
---
   
import { Card, CardGrid, Aside, Tabs, TabItem } from '@astrojs/starlight/components';

`iptables` is a command-line application that allows a system administrator to configure the Linux kernel's firewall (Netfilter). It works by inspecting network packets and deciding what to do with them based on a set of rules.

## Core Concepts
 
To understand `iptables`, you need to know three key concepts: **Tables**, **Chains**, and **Rules**.

<CardGrid>
<Card title="Tables">
Containers for rules designed foa specific purpose. The most common table is `filter`, which is used to decide if a packet should be allowed or not.
</Card>
  <Card title="Chains">
          Checkpoints within a tablwhere rules are applied. The main chains are `INPUT` (for packets destined for the server), `OUTPUT` (for packets generated by the
server), and `FORWARD` (for packets passing through the server).
</Card>
  <Card title="Rules">
          The instructions that tell `iptables` whato do. A rule specifies criteria (e.g., "if the packet is TCP and going to port 22") and an action.
</Card>
    <Card title="Actions / Targets">
        The action to take if a packet matches a rule. The most common are `ACCEPT` (allow), `DROP` (silently discard), and `REJECT` (discard with an error
notification).
    </Card>
</CardGrid>

## Basic `iptables` Commands

<Aside type="caution">
Be very careful when configuring `iptables`, especially on a remote server. An incorrect rule could block your own access (e.g., via SSH)!
</Aside>

### List the Current Rules

This is the safest command to start with. It shows all rules in the `filter` table.
o iptables -L
For a more detailed, numeric view, use `sudo iptables -L -v -n`.

### Set the Default Policy

A good security practice is to block everything by default and only allow what is explicitly necessary.


# Block all incoming and forwarded traffic by default

```bash
sudo iptables -P INPUT DROP
sudo iptables -P FORWARD DROP
```

# Allow all outgoing traffic

```bash
sudo iptables -P OUTPUT ACCEPT
```

### Append a Rule

The `-A` flag adds a rule to the end of a chain. This example allows incoming SSH connections.

```bash
sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT
```

### Delete a Specific Rule
   3 You can delete a rule by its specification (`-D`) or by its line number.
  First, list rules with line numbers
  sudo iptables -L --line-numbers

  Then, delete rule number 1 from the INPUT chain
  sudo iptables -D INPUT 1
   1 
   2 ## Practical Example: A Basic Web Server Firewall
   3 
   4 This script sets up a common and secure firewall for a web server that needs to serve HTTP/HTTPS traffic and allow SSH access.
  #!/bin/bash

  1. Flush all existing rules to start from scratch
  
  ```bash
  sudo iptables -F
  sudo iptables -X # Delete custom chains


  2. Set default policies: Block anything not explicitly allowed
  sudo iptables -P INPUT   DROP
  sudo iptables -P FORWARD DROP
  sudo iptables -P OUTPUT  ACCEPT

  3. Allow loopback traffic (VERY IMPORTANT!)
  The system needs to communicate with itself.
  sudo iptables -A INPUT -i lo -j ACCEPT

  4. Allow established and related connections
  This allows return traffic for connections the server initiated.
  sudo iptables -A INPUT -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT

  5. Allow specific services
  sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT   # SSH
  sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT   # HTTP
  sudo iptables -A INPUT -p tcp --dport 443 -j ACCEPT  # HTTPS
```
 
## Making Rules Permanent (Persistence) 

`iptables` rules are lost on reboot. Hereâ€™s how to make them permanent on different Linux distributions. 
<Tabs>
<TabItem label="Debian / Ubuntu">
The recommended method is to use the `iptables-persistent` package.
```bash
sudo apt-get update
sudo apt-get install iptables-persistent
```

During installation, it will ask if you want to save the current rules. Say yes. If you change the rules later, run this command to save them:

```bash
sudo netfilter-persistent save
```
</TabItem>
<TabItem label="RHEL / CentOS / Fedora">

On these systems, use `iptables-services`.

```bash      
sudo dnf install iptables-services
sudo systemctl enable iptables
```

To save your current rules, run:

```bash      
sudo service iptables save
```

</TabItem>
</Tabs> 

This tutorial covers the fundamentals. With these commands, you can build a very effective firewall for your server.
