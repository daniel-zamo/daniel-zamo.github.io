# Uso la imagen oficial de Hugo para GitLab Pages.
# Incluye Hugo Extended, que es necesario para muchos temas que usan SASS/SCSS.
image: registry.gitlab.com/pages/hugo/hugo_extended:latest

# Define el trabajo (job) que se ejecutar√°. 
# GitLab reconoce el nombre "pages" para desplegar en GitLab Pages.
pages:
  script:
    # Ejecuta el comando de Hugo para construir el sitio.
    # -b $CI_PAGES_URL: Usa la URL base que proporciona GitLab.
    # -d public/: Especifica que el sitio generado debe ir a la carpeta 'public'.
    - hugo -b $CI_PAGES_URL -d public/

  artifacts:
    # Le dice a GitLab que guarde y exponga el contenido de la carpeta 'public'.
    paths:
      - public

  rules:
    # Esta regla es muy importante:
    # Solo ejecuta este trabajo cuando se hace un push a la rama por defecto del repositorio (usualmente "main" o "master").
    # Esto evita que se publique el sitio desde ramas de desarrollo.
    - if: '$CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH'

